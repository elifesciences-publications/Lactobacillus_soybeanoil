#using Qiime 1.9.0
#Check the mapping file
validate_mapping_file.py -m mappingfile.txt -o output/
#open up the html file, yellow = the program fixed and red = you must fix

#Merging Reads (fastq-join and SeqPrep) and Filter reads > 200 nt
#using raw reads from all samples available on ENA PRJEB19690
join_paired_ends.py -f R1_001.fastq -r R2_001.fastq -b I1_001.fastq -j 200 -o output/

#Match barcodes to reads and DeMultiplexing
split_libraries_fastq.py -i output/fastqjoin.join.fastq -o output/splitlibraries_outq25 -m mappingfile.txt -b output/fastqjoin.join_barcodes.fastq -q 25 --rev_comp_mapping_barcodes

#open reference OTU picking to Greengenes database version 13.8 
pick_open_reference_otus.py -i output/splitlibraries_outq25/seqs.fna -r gg_13_8_otus/rep_set/97_otus.fasta -o output/open_ref_otus


root@ubuntu:/mnt/FAMIAP1Jeu_output/open_ref_otus# ls
final_otu_map_mc2.txt   otu_table_mc2.biom                           rep_set.fna  step4_otus
final_otu_map.txt       otu_table_mc2_w_tax.biom                     rep_set.tre  uclust_assigned_taxonomy
log_20140718220105.txt  otu_table_mc2_w_tax_no_pynast_failures.biom  step1_otus
log_20140718220330.txt  prefilter_otus                               step2_otus
new_refseqs.fna         pynast_aligned_seqs                          step3_otus

#add parameters to beta diversity commands
echo -e "make_emperor:add_unique_columns TRUE" > output/beta_params.txt 

#rarify at 40,000 sequences to look at all studies together:
beta_diversity_through_plots.py -i output/open_ref_otus/otu_table_mc2_w_tax.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000 -e 40000 -p output/beta_params.txt


#separate the different studies and samples
#Jackon F2 mice
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1only.biom -m mappingfile.txt -s "FAMI:FAMIAP1"

#Taconic mice
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP3only.biom -m mappingfile.txt -s "FAMI:FAMIAP3"

#Jackson mice, all samples
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -m mappingfile.txt -s "FAMI:FAMIAP4"
#Jackson mice, just all biomass samples (no PMA) 
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_noPMA.biom -m mappingfile.txt -s "PMA:no"
biom convert -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_noPMA.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_noPMA.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"
#Jackson mice, just live samples (PMA) 
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_yesPMA.biom -m mappingfile.txt -s "PMA:yes"
biom convert -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_yesPMA.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_yesPMA.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"
#Jackson mice, just LF diet mice
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -m mappingfile.txt -s "Diet:LF"
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF -e 40000 -p output/beta_params.txt
#Jackson mice, just LF diet mice, live only
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA.biom -m mappingfile.txt -s "PMA:yes"
#Jackson mice, just LF diet mice, all biomass
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_noPMA.biom -m mappingfile.txt -s "PMA:no"
#Jackson mice, just HF diet mice
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -m mappingfile.txt -s "Diet:HF"
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF -e 40000 -p output/beta_params.txt
#Jackson mice, just HF diet mice, live only
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_PMA.biom -m mappingfile.txt -s "PMA:yes"
#Jackson mice, just HF diet mice, all biomass
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_noPMA.biom -m mappingfile.txt -s "PMA:no"








????? beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only -e 40000 -p output/beta_params.txt 
????? beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1only.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP1only -e 40000 -p output/beta_params.txt 


#LF only
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_LF.biom -m mappingfile.txt -s 'Diet:LF' 
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_LF.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA_LF -e 40000 -p output/beta_params.txt 
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA -e 40000 -p output/beta_params.txt 

#HF only
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_HF.biom -m mappingfile.txt -s 'Diet:HF' 
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_HF.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA_HF -e 40000 -p output/beta_params.txt 


#AP3
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP3only.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP3only -e 40000 -p output/beta_params.txt 


#AP4
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_noPMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA -e 40000 -p output/beta_params.txt
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_yesPMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA -e 40000 -p output/beta_params.txt
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -m mappingfile.txt -s "Diet:HF"
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -m mappingfile.txt -s "Diet:LF"
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF -e 40000 -p output/beta_params.txt
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF -e 40000 -p output/beta_params.txt
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA.biom -m mappingfile.txt -s "PMA:yes"
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_PMA.biom -m mappingfile.txt -s "PMA:yes"
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_PMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA -e 40000 -p output/beta_params.txt
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA -e 40000 -p output/beta_params.txt
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_noPMA.biom -m mappingfile.txt -s "PMA:no"
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_noPMA.biom -m mappingfile.txt -s "PMA:no"

beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_noPMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_noPMA -e 40000 -p output/beta_params.txt
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_noPMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_noPMA -e 40000 -p output/beta_params.txt



make_distance_boxplots.py -m mappingfile.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF/unweighteddistance_boxplots/ -d output/open_ref_otus/wf_bdiv_40000_AP4only_HF/unweighted_unifrac_dm.txt -f "Description" --save_raw_data
make_distance_boxplots.py -m mappingfile.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF/unweighteddistance_boxplots/ -d output/open_ref_otus/wf_bdiv_40000_AP4only_LF/unweighted_unifrac_dm.txt -f "Description" --save_raw_data
make_distance_boxplots.py -m mappingfile.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF/weighteddistance_boxplots/ -d output/open_ref_otus/wf_bdiv_40000_AP4only_HF/weighted_unifrac_dm.txt -f "Description" --save_raw_data
make_distance_boxplots.py -m mappingfile.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF/weighteddistance_boxplots/ -d output/open_ref_otus/wf_bdiv_40000_AP4only_LF/weighted_unifrac_dm.txt -f "Description" --save_raw_data





#APpoop
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_poop.biom -m mappingfile.txt -s "SampleType:Poop"
biom convert -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_poop.biom  -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_poop.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"
#to use a nonrare table
filter_samples_from_otu_table.py -i  output/open_ref_otus/otu_table_mc2_w_tax.biom -o  output/open_ref_otus/otu_table_mc2_w_tax_poop.biom -m mappingfile.txt -s "SampleType:Poop"
biom convert -i output/open_ref_otus/otu_table_mc2_w_tax_poop.biom  -o output/open_ref_otus/otu_table_mc2_w_tax_poop.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"


#for the beta diversity I did rare on something already rared and the file size got smaller... the second file just excludes the OTU lines that have no counts in them for the AP4 samples all is good
biom convert -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"
#AP1
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1only/otu_table_mc2_w_tax_even40000_AP1only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1only_even40000.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"
#AP1noDHA
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"

#AP3
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP3only_even40000.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"

#AP2
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP2only_even40000.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"


-look at all the major PCs, is there anything that might be a problem
-how do the diets separate? 
-do distanc the measures
-use tony's tool

#beta_significance.py  #unfinished took too long
beta_significance.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only.biom -t output/open_ref_otus/rep_set.tre -s unweighted_unifrac -o output/open_ref_otus/wf_bdiv_40000/unw_sig.txt

categorized_dist_scatterplot.py # need one of the groupings to be numbers (the -a option)-m mappingfile.txt -d output/open_ref_otus/wf_bdiv_40000/wf_bdiv_4000/unweighted_unifrac_dm.txt -p Diet:LF -s Diet:HF 

make_distance_boxplots.py -m mappingfile.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only/distance_boxplots/ -d output/open_ref_otus/wf_bdiv_40000_AP4only/unweighted_unifrac_dm.txt -f "Diet,Litter,Age,DOB,FatPadPercent,Gavage,PourOrder,PMA,SequenceCounts,FAMIDiet,Description" --save_raw_data
make_distance_boxplots.py -m mappingfile.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only/distance_boxplots2/ -d output/open_ref_otus/wf_bdiv_40000_AP4only/unweighted_unifrac_dm.txt -f "Description" --save_raw_data

#run alpha diversity

alpha_diversity.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/alphadiversity_AP4only -t output/open_ref_otus/rep_set.tre
validate_mapping_file.py -m mappingfile_FAMIAP4.txt -o output/
#AP1
alpha_diversity.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/alphadiversity_AP1onlynoDHA -t output/open_ref_otus/rep_set.tre
validate_mapping_file.py -m mappingfile_FAMIAP1noDHA.txt -o output/

#AP3
alpha_diversity.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP3only/alphadiversity_AP3only -t output/open_ref_otus/rep_set.tre
validate_mapping_file.py -m mappingfile_FAMIAP3.txt -o output/

#AP2
validate_mapping_file.py -m mappingfile_FAMIAP2.txt -o output/





echo “alpha_diversity:metrics shannon,PD_whole_tree,chao1,observed_species” > output/alpha_params.txt
alpha_rarefaction.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -m output/mappingfile_FAMIAP4_corrected.txt -p output/alpha_params.txt -t output/open_ref_otus/rep_set.tre  -o output/open_ref_otus/wf_bdiv_40000_AP4only/alphadiv/ 
#AP1
alpha_rarefaction.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000.biom -m output/mappingfile_FAMIAP1noDHA_corrected.txt -p output/alpha_params.txt -t output/open_ref_otus/rep_set.tre  -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/alphadiv/ 
alpha_diversity.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000.biom -m chao1,PD_whole_tree,shannon,observed_otus -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/alphadiv/chao1_PD_whole_tree_shannon_observed_otus

#AP3
alpha_rarefaction.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000.biom -m output/mappingfile_FAMIAP3_corrected.txt -p output/alpha_params.txt -t output/open_ref_otus/rep_set.tre  -o output/open_ref_otus/wf_bdiv_40000_AP3only/alphadiv/ 
#AP2
alpha_rarefaction.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000.biom -m output/mappingfile_FAMIAP2_corrected.txt -p output/alpha_params.txt -t output/open_ref_otus/rep_set.tre  -o output/open_ref_otus/wf_bdiv_40000_AP2only/alphadiv/ 


#AP4
alpha_diversity.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -m chao1,PD_whole_tree,shannon,observed_otus -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only/alphadiv/chao1_PD_whole_tree_shannon_observed_otus


#all studies
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_APallnopooponly.biom -m mappingfile.txt -s 'FAMI:FAMIAP3,FAMIAP1,FAMIAP2,FAMIAP4'
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_APallnopooponly.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_APall_nopoop_noDHA.biom -m mappingfile.txt -s 'Gavage:*,!DHA'

biom convert -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_APall_nopoop_noDHA.biom -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_APall_nopoop_noDHA.biomtest.txt --to-tsv --header-key taxonomy --table-type="OTU table"













#AP4, no PMA
#permanova, location
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/Permanova_Diet -n 10000
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/Permanova_Gavage -n 10000
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/weightedPermanova_Diet -n 10000
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/weightedPermanova_Gavage -n 10000

compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/Permdisp_Diet -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/Permdisp_Gavage -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/weightedPermdisp_Diet -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_noPMA/comparecategories/weightedPermdisp_Gavage -n 10000

#AP4, no PMA LF
compare_categories.py --method adonis -i output/open_ref_otus/wf_bdiv_40000_AP4only_LF_noPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_noPMA/comparecategories/Adonis_Gavage -n 10000


#AP4, no PMA HF
compare_categories.py --method adonis -i output/open_ref_otus/wf_bdiv_40000_AP4only_HF_noPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_noPMA/comparecategories/Adonis_Gavage -n 10000


#AP4, yes PMA
#permanova, location
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/Permanova_Diet -n 10000
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/Permanova_Gavage -n 10000
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/weightedPermanova_Diet -n 10000
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/weightedPermanova_Gavage -n 10000

compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/Permdisp_Diet -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/unweighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/Permdisp_Gavage -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/weightedPermdisp_Diet -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_yesPMA/comparecategories/weightedPermdisp_Gavage -n 10000


#AP4, yes PMA HF
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/comparecategories/Permanova_Gavage -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/comparecategories/Permdisp_Gavage -n 10000
compare_categories.py --method adonis -i output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/comparecategories/Adonis_Gavage -n 10000



#AP4, yes PMA LF
compare_categories.py --method permanova -i output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/comparecategories/Permanova_Gavage -n 10000
compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/comparecategories/Permdisp_Gavage -n 10000
compare_categories.py --method adonis -i output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/weighted_unifrac_dm.txt -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/comparecategories/Adonis_Gavage -n 10000



#need to run in R compare_categories.py --method permdisp -i output/open_ref_otus/wf_bdiv_40000_AP4only/unweighted_unifrac_dm.txt -m  output/mappingfile_FAMIAP4_corrected.txt -c Description -o output/open_ref_otus/wf_bdiv_40000_AP4only/comparecategories/

summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary -m output/mappingfile_FAMIAP4_corrected.txt

sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_DOBsorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s DOB
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_DOBsorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_DOB -m output/mappingfile_FAMIAP4_corrected.txt


sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_DaysOnDietsorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s DaysOnDiet
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_DaysOnDietsorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_DaysOnDiet -m output/mappingfile_FAMIAP4_corrected.txt

sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Gavagesorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s Gavage
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Gavagesorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_Gavage -m output/mappingfile_FAMIAP4_corrected.txt

sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Cagesorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s Cage
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Cagesorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_Cage -m output/mappingfile_FAMIAP4_corrected.txt

sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Littersorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s Litter
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Littersorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_Litter -m output/mappingfile_FAMIAP4_corrected.txt

#AP4
sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Descriptionsorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s Description
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Descriptionsorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_Description -m output/mappingfile_FAMIAP4_corrected.txt
#AP1
sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_Descriptionsorted.biom -m output/mappingfile_FAMIAP1noDHA_corrected.txt -s Description
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_Descriptionsorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/taxa_summary_Description -m output/mappingfile_FAMIAP1noDHA_corrected.txt
#AP3
sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_Descriptionsorted.biom -m output/mappingfile_FAMIAP3_corrected.txt -s Description
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_Descriptionsorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP3only/taxa_summary_Description -m output/mappingfile_FAMIAP3_corrected.txt


sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Dietsorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s Diet
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_Dietsorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_Diet -m output/mappingfile_FAMIAP4_corrected.txt

sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_FAMIDietGavagesorted.biom -m output/mappingfile_FAMIAP4_corrected.txt -s FAMIDietGavage
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_FAMIDietGavagesorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/taxa_summary_FAMIDietGavage -m output/mappingfile_FAMIAP4_corrected.txt

#AP2
sort_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000.biom -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_Descriptionsorted.biom -m output/mappingfile_FAMIAP2_corrected.txt -s Description
summarize_taxa_through_plots.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_Descriptionsorted.biom -o output/open_ref_otus/wf_bdiv_40000_AP2only/taxa_summary_Description -m output/mappingfile_FAMIAP2_corrected.txt


group_signficance #try without filtering low abundance OTUs and then with filtering
#try kruskal_wallis, nonparametric_t_test
group_significance.py -i  output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/groupsig
# need to filter (use biomedit.pl)
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy


group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/groupsig_otumorethan20_25percent

#repick otus at higher taxonomic level and repeat

#try for Diet
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Diet -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/Diet_groupsig_otumorethan20_25percent

#try for PMA no PMA****
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent.biom -m output/mappingfile_FAMIAP4_corrected.txt -c PMA -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/PMA_groupsig_otumorethan20_25percent

#try for gavage****
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Gavage -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/gavage_groupsig_otumorethan20_25percent


##filter out so each OTU has at least one group with >100 seqs and >1000 seqs
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy

group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/groupsig_otumorethan20_25percent_100greater

biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_1000greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_1000greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_1000greater.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/groupsig_otumorethan20_25percent_1000greater


#AP3
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_1000greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_1000greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy

group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP3_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP3only/groupsig_otumorethan20_25percent_100greater
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_1000greater.biom -m output/mappingfile_FAMIAP3_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP3only/groupsig_otumorethan20_25percent_1000greater
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent.biom -m output/mappingfile_FAMIAP3_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP3only/groupsig_otumorethan20_25percent
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP3_corrected.txt -c FAMIDietGavage -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP3only/groupsig_otumorethan20_25percent_100greater_Gavagegroups


#AP1
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_1000greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_1000greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy


group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP1noDHA_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/groupsig_otumorethan20_25percent_100greater
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_1000greater.biom -m output/mappingfile_FAMIAP1noDHA_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/groupsig_otumorethan20_25percent_1000greater
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent.biom -m output/mappingfile_FAMIAP1noDHA_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/groupsig_otumorethan20_25percent
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP1noDHA_corrected.txt -c FAMIDietGavage -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/groupsig_otumorethan20_25percent_100greater__Gavagegroups
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP1noDHA_corrected.txt -c Diet -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/groupsig_otumorethan20_25percent_100greater__Diet

#make heatmap on FDR<0.05 on 20_25 100 OTU table
make_otu_heatmap.py
#filter the OTU to be just those with FDR < 5%; I did this manually

biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_Dietgroupsig_FDR_05.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_Dietgroupsig_FDR_05.biom  --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
make_otu_heatmap.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_Dietgroupsig_FDR_05.biom  -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/heatmap_otumorethan20_25percent_100greater__Dietnolog -m output/mappingfile_FAMIAP1noDHA_corrected.txt -c Diet --color_scheme summer --no_log_transform
make_otu_heatmap.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_Dietgroupsig_FDR_05.biom  -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/heatmap_otumorethan20_25percent_100greater__Dietnolog_colorcool -m output/mappingfile_FAMIAP1noDHA_corrected.txt -c Diet --color_scheme cool --no_log_transform


#AP4

biom convert -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
biom convert -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA_otumorethan20_25percent_100greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA_otumorethan20_25percent_100greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy


group_significance.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom -m mappingfile.txt -c Gavage -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000/groupsig_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.txt
group_significance.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA_otumorethan20_25percent_100greater.biom -m mappingfile.txt -c Gavage -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000/groupsig_even40000_AP4only_LF_PMA_otumorethan20_25percent_100greater.txt

#removed OTUs with FDR >=.1 from the OTU table, now do heatmap
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/groupsigOTUsFDR_filtered_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/groupsigOTUsFDR_filtered_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
make_otu_heatmap.py -i output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/groupsigOTUsFDR_filtered_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/groupsigOTUsFDR_filtered_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater_Gavagenolog -m mappingfile.txt -c Gavage --color_scheme summer --no_log_transform

make_otu_heatmap.py -i output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/groupsigOTUsFDR_filtered_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/groupsigOTUsFDR_filtered_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater_Gavagenolog_coolcolors -m mappingfile.txt -c Gavage --color_scheme cool --no_log_transform


make_otu_heatmap.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesLF.biom  -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesLF__Gavagenolog -m mappingfile.txt -c Gavage --color_scheme summer --no_log_transform
make_otu_heatmap.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesHF.biom  -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesHF__Gavagenologcool -m mappingfile.txt -c Gavage --color_scheme cool --no_log_transform


output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/groupsigOTUsFDR_filtered_even40000_AP4only_HF_PMA_otumorethan20_25percent_100greater.biom.txt


#AP2
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_1000greater.biom.txt -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_1000greater.biom --to-hdf5 --table-type="OTU table" --process-obs-metadata taxonomy

group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP2_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP2only/groupsig_otumorethan20_25percent_100greater
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_1000greater.biom -m output/mappingfile_FAMIAP2_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP2only/groupsig_otumorethan20_25percent_1000greater
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent.biom -m output/mappingfile_FAMIAP2_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP2only/groupsig_otumorethan20_25percent
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater.biom -m output/mappingfile_FAMIAP2_corrected.txt -c FAMIDietGavage -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP2only/groupsig_otumorethan20_25percent_100greater_Gavagegroups


#do group sig on with PMA and without PMA
#filter with PMA
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes.biom -m mappingfile.txt -s 'PMA:yes'

group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/groupsig_otumorethan20_25percent_100greater_PMAyes

#filter without PMA
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAno.biom -m mappingfile.txt -s 'PMA:no'
group_significance.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAno.biom -m output/mappingfile_FAMIAP4_corrected.txt -c Description -s kruskal_wallis -o output/open_ref_otus/wf_bdiv_40000_AP4only/groupsig_otumorethan20_25percent_100greater_PMAno


#filter within PMA to just 18:2
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes18_2.biom -m mappingfile.txt -s 'Gavage:18_2'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes18_2.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes18_2.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"

#filter within PMA to just NaCl
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesNaCl.biom -m mappingfile.txt -s 'Gavage:NaCl'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesNaCl.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesNaCl.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"


#filter within PMA to just LF
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesLF.biom -m mappingfile.txt -s 'Gavage:NaCl'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesLF.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesLF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"

#filer within PMA to just HF
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyes.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesHF.biom -m mappingfile.txt -s 'Gavage:NaCl'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesHF.biom -o output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesHF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"



#filter AP3 to just LF and just HF
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater_LF.biom -m mappingfile.txt -s 'Diet:LF'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater_LF.biom -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater_LF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"

filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater_HF.biom -m mappingfile.txt -s 'Diet:HF'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater_HF.biom -o output/open_ref_otus/wf_bdiv_40000_AP3only/otu_table_mc2_w_tax_even40000_AP3only_even40000_otumorethan20_25percent_100greater_HF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"


#filter AP2 to just LF and just HF
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater_LF.biom -m mappingfile.txt -s 'Diet:LF'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater_LF.biom -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater_LF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"

filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater_HF.biom -m mappingfile.txt -s 'Diet:HF'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater_HF.biom -o output/open_ref_otus/wf_bdiv_40000_AP2only/otu_table_mc2_w_tax_even40000_AP2only_even40000_otumorethan20_25percent_100greater_HF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"


#filter AP1 to just LF and just HF
filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_LF.biom -m mappingfile.txt -s 'Diet:LF'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_LF.biom -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_LF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"

filter_samples_from_otu_table.py -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater.biom -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_HF.biom -m mappingfile.txt -s 'Diet:HF'
biom convert -i output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_HF.biom -o output/open_ref_otus/wf_bdiv_40000_AP1onlynoDHA/otu_table_mc2_w_tax_even40000_AP1onlynoDHA_even40000_otumorethan20_25percent_100greater_HF.biom.txt --to-tsv --header-key taxonomy --table-type="OTU table"


plot_rank_abundance_graph.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater.biom -s "AP401.yes",AP401.no,AP410.no,AP410.yes,AP458.yes,AP458.no,AP428.yes,AP428.no" -o  output/open_ref_otus/wf_bdiv_40000_AP4only/rankabundance
   #plot the rank abundance of otus in samples, kinda obnixous

#make trees?
#filter the OTU table to just lactos or just Clostri
#make plot showing the order of the sample groups that has the most to the least of Lacto and the verus for something else



#filter to just HF
#filter to just oil
#beta diversity
#compare categories on the distance matrix

#if there's a difference here, try filter to just Lactos




#try out machine learning on the PMA data:
supervised_learning.py -i otu_table.biom -m Fasting_Map.txt -c Treatment -o ml -v -e loo
supervised_learning.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_100greater_PMAyesHF.biom -m mappingfile.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA/HFPMA_ml -v -e loo
supervised_learning.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA.biom -m mappingfile.txt -c Gavage -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/LFPMA_ml -v -e loo
supervised_learning.py -i output/open_ref_otus/wf_bdiv_40000_AP4only/otu_table_mc2_w_tax_even40000_AP4only_even40000_otumorethan20_25percent_1000greater.biom -m mappingfile.txt -c Diet -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA/LFPMA_ml -v -e loo

beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_HF_PMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_HF_PMA -e 40000 -p output/beta_params.txt
beta_diversity_through_plots.py -i output/open_ref_otus/wf_bdiv_40000/otu_table_mc2_w_tax_even40000_AP4only_LF_PMA.biom -m mappingfile.txt -t output/open_ref_otus/rep_set.tre -o output/open_ref_otus/wf_bdiv_40000_AP4only_LF_PMA -e 40000 -p output/beta_params.txt




compare_taxa_summaries.py #use on PMA vs not-PMA

compare_taxa_summaries.py -i  #need taxa summary files


compare_distance_matrices   #use with fatty acid distance matrix

compute_core_microbiome #between different treatments
cytoscape network?  see also: make_bipartite_network; make_otu_network


distance_matrix_from_mapping
identify_paired_differences

make_distance_comparison_plots
make_otu_heatmap
make_tep  # for making trees
shared_phylotypes
simsam
upgma_cluster  upgma_cluster.py -i $PWD/beta_div.txt -o $PWD/beta_div_cluster.tre

do a rank abudance of otus to get an idea of how spread out the sequencing results?

#also do alpha on every sample together to see the difference between the studies

#do weighted? gives pretty pics

make a heatmap
